---
import Footer from "../components/Footer.astro";
import HippobeseBar from "../components/HippobeseBar.astro";
import MainComponent from "../components/MainComponent.astro";
import Menu from "../components/Menu.astro";
import SearchSection from "../components/SearchSection.astro";
import SupportAlert from "../components/SupportAlert.astro";

const isRoot = new URL(Astro.request.url).pathname === "/";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content="Discover summarized and insightful content generated by AI, covering topics from technology to lifestyle. Stay informed with concise, intelligent overviews.">
    <title>Literary AI</title>
    <meta name="robots" content="index, follow">
    <meta name="author" content="R0beso">
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
    </script>
  </head>
  <body>
    
    <script>
      import { defineLanguage } from '../utils/defineLanguage';
    
      defineLanguage();
    </script>
    <script>
      const introBar = document.getElementById('hippobese-bar');
      const fixedBar = document.getElementById('fixed');
      
      window.addEventListener('scroll', () => {
        if(introBar && fixedBar){
          if (window.scrollY > 50) {
            introBar.classList.add('hidden');
            fixedBar.classList.add('fixed-top');
          } else {
            introBar.classList.remove('hidden');
            fixedBar.classList.remove('fixed-top');
          }
        }

      });
    </script>

    <div id="hippobese-bar">
      <HippobeseBar />
    </div>
    <div id="fixed" style={isRoot ? 'position: fixed;' : 'top: 0'}>
      <Menu />
      <SearchSection />
    </div>
    <div id="movable" style={isRoot ? 'padding-top: 223px' : 'padding-top: 142px'}>
      <MainComponent>
        <slot />
      </MainComponent>
      <Footer />
    </div>
    <SupportAlert />
    
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
    background-color: #1F2020;
    font-family: 'Segoe UI', Verdana, sans-serif;
    color: white;
  }

  #fixed {
    position: fixed;
    top: 81px; /* altura de la intro-bar */
    left: 0;
    right: 0;
    z-index: 9999;
  }

  /* Cuando intro-bar desaparece, el fixed sube */
  #fixed.fixed-top {
    top: 0;
  }

  #movable {
    padding-top: 223px;
  }

  #hippobese-bar {
    padding: 0 !important;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: #1F2020;
    text-align: center;
    padding: 10px;
    z-index: 1000;
    transition: transform 0.5s ease;
  }

  #hippobese-bar.hidden {
    transform: translateY(-100%);
  }


</style>

