---
import Article from "../../components/Article.astro";
import Banner from "../../components/Banner.astro";
import Layout from "../../layouts/Layout.astro";

---
<Layout>
    <script>
        import arrayJson from '../../../public/api/articles.json'
        
        const idBuscado = new URL(window.location.href).searchParams.get('a');
        const articleData = arrayJson.find(obj => obj.id === idBuscado);
        const metaTag = document.querySelector('meta[name="description"]');

        if (metaTag) {
            if (document.documentElement.lang === "es") {
                metaTag.setAttribute('content', articleData?.['summary-es'] || "Descubre contenido resumido y perspicaz generado por IA, que abarca temas desde tecnología hasta estilo de vida. Mantente informado con resúmenes concisos e inteligentes.");
            } else {
                metaTag.setAttribute('content', articleData?.['summary-en'] || "Discover summarized and insightful content generated by AI, covering topics from technology to lifestyle. Stay informed with concise, intelligent overviews.");
            }
        }

        function defineTitle() {
            let title;

            if (document.documentElement.lang === "en") title = articleData?.['title-en'];
            else title = articleData?.['title-es'];
            
            const metaTag = document.querySelector('title');
            if (metaTag) metaTag.textContent = title || "Hippobese";
        }

        defineTitle();
        const clickDiv = document.querySelector('.flags');

        if (clickDiv) {
            clickDiv.addEventListener('click', () => {
                defineTitle();
            });
        }
    </script>
    <Banner />
    <Article />
</Layout>